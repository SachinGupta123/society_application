From 8847e6d61404e6cf13133bb265b756ce4d7dd382 Mon Sep 17 00:00:00 2001
From: waingankar_ashish <ashish@paynetpayments.com>
Date: Tue, 6 Aug 2019 16:36:55 +0530
Subject: [PATCH] Migration File Fixed For Base Creation

---
 .gitignore                                    |   1 +
 ...ase.php => 20190805155145_create_base.php} | 350 ++++++++++++++----
 2 files changed, 277 insertions(+), 74 deletions(-)
 rename application/migrations/{001_create_base.php => 20190805155145_create_base.php} (73%)

diff --git a/.gitignore b/.gitignore
index bfea17c..7b2af22 100644
--- a/.gitignore
+++ b/.gitignore
@@ -15,3 +15,4 @@ application/logs/*
 !application/logs/index.html
 !application/logs/.htaccess
 /vendor/
+application/config/database.php
\ No newline at end of file
diff --git a/application/migrations/001_create_base.php b/application/migrations/20190805155145_create_base.php
similarity index 73%
rename from application/migrations/001_create_base.php
rename to application/migrations/20190805155145_create_base.php
index 8ee2e66..3c48cfc 100644
--- a/application/migrations/001_create_base.php
+++ b/application/migrations/20190805155145_create_base.php
@@ -5,7 +5,14 @@ class Migration_create_base extends CI_Migration {
 	public function up() {
 
 		## Create Table activity_logs
-		$this->dbforge->add_field("`id` int(11) NOT NULL auto_increment");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`user_id` varchar(255) NULL ");
 		$this->dbforge->add_field("`browser` varchar(255) NULL ");
@@ -20,15 +27,22 @@ class Migration_create_base extends CI_Migration {
 		$this->dbforge->create_table("activity_logs", TRUE);
 		$this->db->query('ALTER TABLE  `activity_logs` ENGINE = MyISAM');
 		## Create Table bank_transactions
-		$this->dbforge->add_field("`id` int(11) NOT NULL auto_increment");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`date` timestamp NULL ");
 		$this->dbforge->add_field("`narration` varchar(255) NULL ");
 		$this->dbforge->add_field("`credit` decimal(20,2) NULL ");
 		$this->dbforge->add_field("`debit` decimal(20,2) NULL ");
 		$this->dbforge->add_field("`balance` decimal(20,2) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL ");
 		$this->dbforge->add_field("`bank_id` int(11) NULL ");
 		$this->dbforge->add_field("`society_id` int(11) NULL ");
 		$this->dbforge->add_field("`expense_id` int(11) NULL ");
@@ -37,7 +51,14 @@ class Migration_create_base extends CI_Migration {
 		$this->dbforge->create_table("bank_transactions", TRUE);
 		$this->db->query('ALTER TABLE  `bank_transactions` ENGINE = MyISAM');
 		## Create Table banks
-		$this->dbforge->add_field("`id` int(11) NOT NULL auto_increment");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`bank_name` varchar(255) NULL ");
 		$this->dbforge->add_field("`address` varchar(255) NULL ");
@@ -49,21 +70,28 @@ class Migration_create_base extends CI_Migration {
 		$this->dbforge->add_field("`exp_dt` date NULL ");
 		$this->dbforge->add_field("`phone` bigint(20) NULL ");
 		$this->dbforge->add_field("`email` varchar(255) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL");
 		$this->dbforge->add_field("`society_id` int(11) NULL ");
 		$this->dbforge->add_field("`opening_balance` decimal(15,2) NULL ");
 		$this->dbforge->add_field("`current_balance` decimal(15,2) NULL ");
 		$this->dbforge->create_table("banks", TRUE);
 		$this->db->query('ALTER TABLE  `banks` ENGINE = MyISAM');
 		## Create Table bill_details
-		$this->dbforge->add_field("`id` int(11) NOT NULL auto_increment");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`payment_id` int(11) NULL ");
 		$this->dbforge->add_field("`bill_amount` decimal(15,2) NULL ");
 		$this->dbforge->add_field("`previous_member_balance` decimal(15,2) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL ");
 		$this->dbforge->add_field("`details` text NULL ");
 		$this->dbforge->add_field("`member_id` int(11) NULL ");
 		$this->dbforge->add_field("`society_id` int(11) NULL ");
@@ -86,40 +114,68 @@ class Migration_create_base extends CI_Migration {
 		$this->dbforge->create_table("bill_details", TRUE);
 		$this->db->query('ALTER TABLE  `bill_details` ENGINE = MyISAM');
 		## Create Table billing_heads
-		$this->dbforge->add_field("`id` int(11) NOT NULL auto_increment");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`name` varchar(255) NULL ");
 		$this->dbforge->add_field("`amount` double NULL ");
 		$this->dbforge->add_field("`society_id` int(11) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL");
 		$this->dbforge->add_field("`is_unit_value` tinyint(1) NULL ");
 		$this->dbforge->add_field("`flat_type_id` int(11) NULL ");
 		$this->dbforge->create_table("billing_heads", TRUE);
 		$this->db->query('ALTER TABLE  `billing_heads` ENGINE = MyISAM');
 		## Create Table cowork_master
-		$this->dbforge->add_field("`id` mediumint(8) unsigned NOT NULL auto_increment");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`created_at` datetime NOT NULL ");
 		$this->dbforge->create_table("cowork_master", TRUE);
 		$this->db->query('ALTER TABLE  `cowork_master` ENGINE = InnoDB');
 		## Create Table expense_categories
-		$this->dbforge->add_field("`id` int(11) NOT NULL auto_increment");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`name` varchar(255) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL");
 		$this->dbforge->create_table("expense_categories", TRUE);
 		$this->db->query('ALTER TABLE  `expense_categories` ENGINE = MyISAM');
 		## Create Table expenses
-		$this->dbforge->add_field("`id` int(11) NOT NULL auto_increment");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`date` timestamp NULL ");
 		$this->dbforge->add_field("`payee` varchar(255) NULL ");
 		$this->dbforge->add_field("`amount` decimal(15,2) NULL ");
 		$this->dbforge->add_field("`description` varchar(255) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL ");
 		$this->dbforge->add_field("`expense_category_id` int(11) NULL ");
 		$this->dbforge->add_field("`society_id` int(11) NULL ");
 		$this->dbforge->add_field("`service_provider_id` int(11) NULL ");
@@ -127,40 +183,68 @@ class Migration_create_base extends CI_Migration {
 		$this->dbforge->create_table("expenses", TRUE);
 		$this->db->query('ALTER TABLE  `expenses` ENGINE = MyISAM');
 		## Create Table flat_sub_types
-		$this->dbforge->add_field("`id` int(11) NOT NULL ");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`name` varchar(255) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL");
 		$this->dbforge->add_field("`flat_type_id` int(11) NULL ");
 		$this->dbforge->create_table("flat_sub_types", TRUE);
 		$this->db->query('ALTER TABLE  `flat_sub_types` ENGINE = MyISAM');
 		## Create Table flat_types
-		$this->dbforge->add_field("`id` int(11) NOT NULL ");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`name` varchar(255) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL ");
 		$this->dbforge->add_field("`society_id` int(11) NULL ");
 		$this->dbforge->create_table("flat_types", TRUE);
 		$this->db->query('ALTER TABLE  `flat_types` ENGINE = MyISAM');
 		## Create Table member_plans
-		$this->dbforge->add_field("`id` int(11) NOT NULL ");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`member_id` int(11) NULL ");
 		$this->dbforge->add_field("`plan_id` int(11) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL ");
 		$this->dbforge->create_table("member_plans", TRUE);
 		$this->db->query('ALTER TABLE  `member_plans` ENGINE = MyISAM');
 		## Create Table members
-		$this->dbforge->add_field("`id` int(11) NOT NULL auto_increment");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`flat_no` int(11) NULL ");
 		$this->dbforge->add_field("`tenant` tinyint(1) NULL ");
 		$this->dbforge->add_field("`phone` bigint(20) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL ");
 		$this->dbforge->add_field("`society_id` int(11) NULL ");
 		$this->dbforge->add_field("`member_balance` decimal(15,2) NULL DEFAULT '0.00' ");
 		$this->dbforge->add_field("`flat_area` int(11) NULL ");
@@ -181,19 +265,33 @@ class Migration_create_base extends CI_Migration {
 		$this->dbforge->create_table("migrations", TRUE);
 		$this->db->query('ALTER TABLE  `migrations` ENGINE = InnoDB');
 		## Create Table parking_charges
-		$this->dbforge->add_field("`id` int(11) NOT NULL ");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`member_two_wheeler` decimal(10,2) NULL ");
 		$this->dbforge->add_field("`tenant_two_wheeler` decimal(10,2) NULL ");
 		$this->dbforge->add_field("`member_four_wheeler` decimal(10,2) NULL ");
 		$this->dbforge->add_field("`tenant_four_wheeler` decimal(10,2) NULL ");
 		$this->dbforge->add_field("`society_id` int(11) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL ");
 		$this->dbforge->create_table("parking_charges", TRUE);
 		$this->db->query('ALTER TABLE  `parking_charges` ENGINE = MyISAM');
 		## Create Table payments
-		$this->dbforge->add_field("`id` int(11) NOT NULL ");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`payment_date` timestamp NULL ");
 		$this->dbforge->add_field("`due_date` date NULL ");
@@ -204,8 +302,8 @@ class Migration_create_base extends CI_Migration {
 		$this->dbforge->add_field("`paid_by` varchar(255) NULL ");
 		$this->dbforge->add_field("`details` varchar(255) NULL ");
 		$this->dbforge->add_field("`status` varchar(255) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL ");
 		$this->dbforge->add_field("`member_id` int(11) NULL ");
 		$this->dbforge->add_field("`society_id` int(11) NULL ");
 		$this->dbforge->add_field("`arrears` decimal(15,2) NULL DEFAULT '0.00' ");
@@ -222,33 +320,54 @@ class Migration_create_base extends CI_Migration {
 		$this->dbforge->create_table("payments", TRUE);
 		$this->db->query('ALTER TABLE  `payments` ENGINE = MyISAM');
 		## Create Table roles
-		$this->dbforge->add_field("`id` int(11) NOT NULL auto_increment");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`role_name` varchar(255) NULL ");
 		$this->dbforge->create_table("roles", TRUE);
 		$this->db->query('ALTER TABLE  `roles` ENGINE = MyISAM');
 		## Create Table service_providers
-		$this->dbforge->add_field("`id` int(11) NOT NULL ");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`name` varchar(255) NULL ");
 		$this->dbforge->add_field("`address` varchar(255) NULL ");
 		$this->dbforge->add_field("`contact_no` varchar(255) NULL ");
 		$this->dbforge->add_field("`sp_type` varchar(255) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL ");
 		$this->dbforge->add_field("`email` varchar(255) NULL ");
 		$this->dbforge->add_field("`society_id` int(11) NULL ");
 		$this->dbforge->create_table("service_providers", TRUE);
 		$this->db->query('ALTER TABLE  `service_providers` ENGINE = MyISAM');
 		## Create Table societies
-		$this->dbforge->add_field("`id` int(11) NOT NULL auto_increment");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`name` varchar(255) NULL ");
 		$this->dbforge->add_field("`address` varchar(255) NULL ");
 		$this->dbforge->add_field("`registration_no` varchar(255) NULL ");
 		$this->dbforge->add_field("`no_of_flats` varchar(255) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL ");
 		$this->dbforge->add_field("`opening_balance` bigint(20) NULL ");
 		$this->dbforge->add_field("`billing_head_id` int(11) NULL ");
 		$this->dbforge->add_field("`image_file_name` varchar(255) NULL ");
@@ -281,17 +400,31 @@ class Migration_create_base extends CI_Migration {
 		$this->dbforge->create_table("societies", TRUE);
 		$this->db->query('ALTER TABLE  `societies` ENGINE = MyISAM');
 		## Create Table society_accesses
-		$this->dbforge->add_field("`id` int(11) NOT NULL ");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`user_id` int(11) NULL ");
 		$this->dbforge->add_field("`role_id` int(11) NULL ");
 		$this->dbforge->add_field("`society_id` int(11) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL");
 		$this->dbforge->create_table("society_accesses", TRUE);
 		$this->db->query('ALTER TABLE  `society_accesses` ENGINE = MyISAM');
 		## Create Table society_enrollment_requests
-		$this->dbforge->add_field("`id` int(11) NOT NULL ");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`name` varchar(255) NULL ");
 		$this->dbforge->add_field("`email` varchar(255) NULL ");
@@ -304,21 +437,37 @@ class Migration_create_base extends CI_Migration {
 		$this->dbforge->add_field("`country` varchar(255) NULL ");
 		$this->dbforge->add_field("`pincode` varchar(255) NULL ");
 		$this->dbforge->add_field("`reference` varchar(255) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL");
 		$this->dbforge->add_field("`span` varchar(255) NULL ");
 		$this->dbforge->create_table("society_enrollment_requests", TRUE);
 		$this->db->query('ALTER TABLE  `society_enrollment_requests` ENGINE = MyISAM');
 		## Create Table society_service_providers
-		$this->dbforge->add_field("`id` int(11) NOT NULL ");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
+		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`society_id` int(11) NULL ");
 		$this->dbforge->add_field("`service_provider_id` int(11) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL");
 		$this->dbforge->create_table("society_service_providers", TRUE);
 		$this->db->query('ALTER TABLE  `society_service_providers` ENGINE = MyISAM');
 		## Create Table up_bill_details
-		$this->dbforge->add_field("`id` int(11) NOT NULL ");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
+		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`bill_date` date NULL ");
 		$this->dbforge->add_field("`due_date` date NULL ");
 		$this->dbforge->add_field("`bill_amount` double NULL ");
@@ -338,18 +487,33 @@ class Migration_create_base extends CI_Migration {
 		$this->dbforge->create_table("up_bill_details", TRUE);
 		$this->db->query('ALTER TABLE  `up_bill_details` ENGINE = MyISAM');
 		## Create Table up_billing_heads
-		$this->dbforge->add_field("`id` int(11) NOT NULL ");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
+		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`name` varchar(255) NULL ");
 		$this->dbforge->add_field("`is_unit_value` tinyint(1) NULL ");
 		$this->dbforge->add_field("`amount` double NULL ");
 		$this->dbforge->add_field("`utility_service_provider_id` int(11) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL");
 		$this->dbforge->add_field("`utility_plan_id` int(11) NULL ");
 		$this->dbforge->create_table("up_billing_heads", TRUE);
 		$this->db->query('ALTER TABLE  `up_billing_heads` ENGINE = MyISAM');
 		## Create Table up_payments
-		$this->dbforge->add_field("`id` int(11) NOT NULL auto_increment");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`payment_date` timestamp NULL ");
 		$this->dbforge->add_field("`due_date` date NULL ");
@@ -371,7 +535,14 @@ class Migration_create_base extends CI_Migration {
 		$this->dbforge->create_table("up_payments", TRUE);
 		$this->db->query('ALTER TABLE  `up_payments` ENGINE = MyISAM');
 		## Create Table users
-		$this->dbforge->add_field("`id` int(11) NOT NULL auto_increment");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`encrypted_password` varchar(255) NULL ");
 		$this->dbforge->add_field("`reset_password_token` varchar(255) NULL ");
@@ -382,8 +553,8 @@ class Migration_create_base extends CI_Migration {
 		$this->dbforge->add_field("`last_sign_in_at` timestamp NULL ");
 		$this->dbforge->add_field("`current_sign_in_ip` int(10) unsigned NULL ");
 		$this->dbforge->add_field("`last_sign_in_ip` int(10) unsigned NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL");
 		$this->dbforge->add_field("`role_id` int(11) NULL ");
 		$this->dbforge->add_field("`member_id` int(11) NULL ");
 		$this->dbforge->add_field("`username` varchar(255) NULL ");
@@ -391,7 +562,15 @@ class Migration_create_base extends CI_Migration {
 		$this->dbforge->create_table("users", TRUE);
 		$this->db->query('ALTER TABLE  `users` ENGINE = MyISAM');
 		## Create Table utility_bills
-		$this->dbforge->add_field("`id` int(11) NOT NULL ");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
+		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`bill_date` date NULL ");
 		$this->dbforge->add_field("`due_date` date NULL ");
 		$this->dbforge->add_field("`bill_amount` double NULL ");
@@ -399,32 +578,55 @@ class Migration_create_base extends CI_Migration {
 		$this->dbforge->add_field("`plan_id` int(11) NULL ");
 		$this->dbforge->add_field("`service_charges` double NULL ");
 		$this->dbforge->add_field("`service_tax` double NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL");
 		$this->dbforge->create_table("utility_bills", TRUE);
 		$this->db->query('ALTER TABLE  `utility_bills` ENGINE = MyISAM');
 		## Create Table utility_plans
-		$this->dbforge->add_field("`id` int(11) NOT NULL ");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
+		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`plan_name` varchar(255) NULL ");
 		$this->dbforge->add_field("`amount` double NULL ");
 		$this->dbforge->add_field("`utility_service_provider_id` int(11) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL");
 		$this->dbforge->create_table("utility_plans", TRUE);
 		$this->db->query('ALTER TABLE  `utility_plans` ENGINE = MyISAM');
 		## Create Table utility_service_provider_members
-		$this->dbforge->add_field("`id` int(11) NOT NULL ");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
+		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`utility_service_provider_id` int(11) NULL ");
 		$this->dbforge->add_field("`member_id` int(11) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL");
 		$this->dbforge->add_field("`utility_plan_id` int(11) NULL ");
 		$this->dbforge->add_field("`member_balance` double NULL ");
 		$this->dbforge->add_field("`initial_outstanding` double NULL ");
 		$this->dbforge->create_table("utility_service_provider_members", TRUE);
 		$this->db->query('ALTER TABLE  `utility_service_provider_members` ENGINE = MyISAM');
 		## Create Table utility_service_providers
-		$this->dbforge->add_field("`id` int(11) NOT NULL auto_increment");
+		$this->dbforge->add_field(array(
+			'id'=>array(
+				'type' => 'INT',
+                'constraint' => 11,
+                'unsigned' => TRUE,
+                'auto_increment' => TRUE
+			)
+		));
 		$this->dbforge->add_key("id",true);
 		$this->dbforge->add_field("`business_name` varchar(255) NULL ");
 		$this->dbforge->add_field("`address` varchar(255) NULL ");
@@ -434,8 +636,8 @@ class Migration_create_base extends CI_Migration {
 		$this->dbforge->add_field("`service_tax_unit` double NULL ");
 		$this->dbforge->add_field("`provider_type` varchar(255) NULL ");
 		$this->dbforge->add_field("`phone_no` bigint(20) NULL ");
-		$this->dbforge->add_field("`created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP");
-		$this->dbforge->add_field("`updated_at` timestamp NOT NULL DEFAULT 0000-00-00 00:00:00 ");
+		$this->dbforge->add_field("`created_at` timestamp NOT NULL ");
+		$this->dbforge->add_field("`updated_at` timestamp NOT NULL");
 		$this->dbforge->create_table("utility_service_providers", TRUE);
 		$this->db->query('ALTER TABLE  `utility_service_providers` ENGINE = MyISAM');
 	 }
-- 
2.22.0.windows.1

